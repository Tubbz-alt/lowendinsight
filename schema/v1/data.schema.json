{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/data.schema.json",
  "title": "Report",
  "description": "A LowEndInsight dataset for an individual git repo.",
  "type": "object",
  "properties": {
    "data": {
      "title": "LowEndInsight Analysis Data",
      "additionalProperties": false,
      "description": "The report data",
      "type": "object",
      "properties": {
        "config": {
          "type": "object",
          "properties": {
            "medium_large_commit_level": {
              "type": "number"
            },
            "high_functional_contributors_level": {
              "type": "number"
            },
            "critical_currency_level": {
              "type": "number"
            },
            "high_contributor_level": {
              "type": "number"
            },
            "high_large_commit_level": {
              "type": "number"
            },
            "critcal_contributor_level": {
              "type": "number"
            },
            "medium_contributor_level": {
              "type": "number"
            },
            "high_currency_level": {
              "type": "number"
            },
            "critical_functional_contributors_level": {
              "type": "number"
            },
            "medium_functional_contributors_level": {
              "type": "number"
            },
            "medium_currency_level": {
              "type": "number"
            },
            "critical_large_commit_level": {
              "type": "number"
            }
          }
        },
        "error": {
          "title": "Error message",
          "description": "If LowEndInsight is unable to analyze a repo, it will respond with this error field.",
          "type": "string",
          "examples" : [
            "Unable to analyze the repo (https://github.com/kitplummer/blah), is this a valid Git repo URL?",
            "Unable to analyze the repo (https://github.com/kitplummer/blah), LowEndInsight configuration not found."
          ]
        },
        "repo": {
          "type": "string"
        },
        "results": {
          "type": "object",
          "properties": {
            "commit_currency_risk": {
              "type": "string"
            },
            "commit_currency_weeks": {
              "type": "number"
            },
            "contributor_count": {
              "type": "number"
            },
            "contributor_risk": {
              "type": "string"
            },
            "functional_contributor_names": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "functional_contributors": {
              "type": "number"
            },
            "functional_contributors_risk": {
              "type": "string"
            },
            "large_recent_commit_risk": {
              "type": "string"
            },
            "recent_commit_size_in_percent_of_codebase": {
              "type": "number"
            }
          }
        },
        "risk": {
          "type": "string"
        }
      },
      "required": [
        "config",
        "risk",
        "repo"
      ],
      "anyOf": [
        {
          "required": ["results"]
        },
        {
          "required": ["error"]
        }
      ]
    },
    "header": {
      "additionalProperties": false,
      "description": "Information about the report's generation.",
      "type": "object",
      "properties": {
        "duration": {
          "type": "number"
        },
        "end_time": {
          "type": "string"
        },
        "start_time": {
          "type": "string"
        },
        "uuid": {
          "pattern": "[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}",
          "type": "string"
        },
        "library_version": {
          "type": "string"
        },
        "source_client": {
          "type": "string"
        }
      },
      "required": [
        "uuid",
        "library_version",
        "duration",
        "end_time",
        "start_time"
      ]
    }
  },
  "required": ["data"],
  "definitions": {
    "risk-level": {
      "enum": [
        "critical",
        "high",
        "medium",
        "low"
      ]
    }
  }
}